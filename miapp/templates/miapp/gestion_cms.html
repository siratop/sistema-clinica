{% extends 'miapp/base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-warning-emphasis fw-bold"><i class="fa-solid fa-pen-nib"></i> Gestión Web</h2>
    <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">Volver al Panel</a>
</div>

<div class="alert alert-warning border-warning shadow-sm d-flex justify-content-between align-items-center">
    <div>
        <strong><i class="fa-solid fa-bullhorn"></i> Aviso Actual:</strong> 
        {{ aviso.mensaje|default:"Sin aviso configurado"|truncatechars:80 }}
    </div>
    <a href="{% url 'editar_aviso' %}" class="btn btn-sm btn-dark text-warning">Editar Aviso</a>
</div>

<div class="card shadow mb-4">
    <div class="card-header bg-warning text-dark fw-bold d-flex justify-content-between">
        <span><i class="fa-regular fa-images"></i> Carrusel (Portada)</span>
        <a href="{% url 'crear_slide' %}" class="btn btn-sm btn-dark text-warning fw-bold">+ Subir Foto</a>
    </div>
    <div class="card-body p-0">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr><th>Orden</th><th>Imagen</th><th>Título</th><th>Estado</th><th>Acciones</th></tr>
            </thead>
            <tbody>
                {% for slide in slides %}
                <tr>
                    <td class="fw-bold">{{ slide.orden }}</td>
                    <td>
                        {% if slide.imagen %}
                        <img src="{{ slide.imagen.url }}" height="50" class="rounded">
                        {% endif %}
                    </td>
                    <td>{{ slide.titulo }}</td>
                    <td>{% if slide.activo %}<span class="badge bg-success">Visible</span>{% else %}<span class="badge bg-secondary">Oculto</span>{% endif %}</td>
                    <td>
                        <a href="{% url 'editar_slide' slide.id %}" class="btn btn-sm btn-primary">Editar</a>
                        <a href="{% url 'eliminar_slide' slide.id %}" class="btn btn-sm btn-danger" onclick="return confirm('¿Borrar?');"><i class="fa-solid fa-trash"></i></a>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center text-muted p-3">No hay imágenes.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="card shadow border-warning">
    <div class="card-header bg-warning text-dark fw-bold d-flex justify-content-between">
        <span><i class="fa-solid fa-circle-question"></i> Preguntas Frecuentes</span>
        <a href="{% url 'crear_faq' %}" class="btn btn-sm btn-dark text-warning fw-bold">+ Nueva Pregunta</a>
    </div>
    <div class="card-body p-0">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr><th>Orden</th><th>Pregunta</th><th>Estado</th><th>Acciones</th></tr>
            </thead>
            <tbody>
                {% for faq in faqs %}
                <tr>
                    <td class="fw-bold">{{ faq.orden }}</td>
                    <td>{{ faq.pregunta }}</td>
                    <td>{% if faq.activa %}<span class="badge bg-success">Visible</span>{% else %}<span class="badge bg-secondary">Oculta</span>{% endif %}</td>
                    <td>
                        <a href="{% url 'editar_faq' faq.id %}" class="btn btn-sm btn-primary">Editar</a>
                        <a href="{% url 'eliminar_faq' faq.id %}" class="btn btn-sm btn-danger" onclick="return confirm('¿Borrar?');"><i class="fa-solid fa-trash"></i></a>
                    </td>
                </tr>
                {% empty %}
                <tr><td colspan="4" class="text-center text-muted p-3">No hay preguntas registradas.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}